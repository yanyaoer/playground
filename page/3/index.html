<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>yányào.com | Home </title><link rel=icon type=image/png href=#ZgotmplZ><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta property="og:image" content><link rel=alternate type=application/rss+xml href=https://xn--ynyo-2nad.com/index.xml title=yányào.com><meta property="og:url" content="https://xn--ynyo-2nad.com/"><meta property="og:site_name" content="yányào.com"><meta property="og:title" content="yányào.com"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="yányào.com"><script src=https://xn--ynyo-2nad.com/js/feather.min.js></script><link href=https://xn--ynyo-2nad.com/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://xn--ynyo-2nad.com/css/main.5cebd7d4fb2b97856af8d32a6def16164fcf7d844e98e236fcb3559655020373.css></head><body><div class=content><header><div class=main><a href=https://xn--ynyo-2nad.com/>yányào.com</a></div><nav><a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/tags>Tags</a></nav></header><main class=list><div class=site-description><p>looking a wood sprite in the forest</p></div><section class=list-item><h1 class=title><a href=/posts/let-s-encrypt/>let's encrypt</a></h1><time>Dec 14, 2015</time><br><div class=description><p><a href=https://letsencrypt.org>Let&rsquo;s Encrypt</a> 已经公开测试，不需要再提交测试域名表单，直接就能申请<br>小项目以后都能用这玩意开 https 不用花钱买证书哦啦啦</p><p>照 <a href=https://letsencrypt.readthedocs.org/en/latest/using.html>文档</a> 做一遍给域名签上证书还挺简单的</p><p><img src=images/ssl.jpg alt=ssl></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># 获取项目代码</span>
</span></span><span style=display:flex><span>git clone https://github.com/letsencrypt/letsencrypt
</span></span><span style=display:flex><span><span style=color:#b58900>cd</span> letsencrypt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># 安装依赖</span>
</span></span><span style=display:flex><span>./letsencrypt-auto
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># 获取证书</span>
</span></span><span style=display:flex><span>./letsencrypt-auto certonly --standalone -d www.example.com -d example.com
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># 配置 nginx</span>
</span></span><span style=display:flex><span>server <span style=color:#719e07>{</span>
</span></span><span style=display:flex><span>  listen <span style=color:#2aa198>443</span> ;
</span></span><span style=display:flex><span>  ssl on;
</span></span><span style=display:flex><span>  ssl_certificate_key /etc/letsencrypt/live/youdomain/privkey.pem;
</span></span><span style=display:flex><span>  ssl_certificate /etc/letsencrypt/live/youdomain/fullchain.pem;
</span></span><span style=display:flex><span><span style=color:#719e07>}</span>
</span></span></code></pre></div><p><del>需要注意的是 dnspod 等国内服务解析域名有问题</del><br>我这里直接切回 domains.google.com 就行了<br>使用 standalone 模式需要先停掉默认的 nginx<br>文档里提到可以使用 webroot 模式不用停
但我创建验证文件失败了 :(<br>默认90天过期，建议 crontab 定时更新</p><p>###Update</p><p>使用 <a href=https://github.com/Neilpang/acme.sh>acme.sh</a></p><ul><li>An ACME protocol client written purely in Shell (Unix shell) language.</li><li>Fully ACME protocol implementation.</li><li>Simple, powerful and very easy to use. You only need 3 minutes to learn.</li><li>Bash, dash and sh compatible.</li><li>Simplest shell script for Let&rsquo;s Encrypt free certificate client.</li><li>Purely written in Shell with no dependencies on python or Let&rsquo;s Encrypt official client.</li><li>Just one script, to issue, renew and install your certificates automatically.</li></ul><p>或者 <a href=https://caddyserver.com>caddyserver</a></p>&mldr;</div><a class=readmore href=/posts/let-s-encrypt/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/simple-nodejs-crawler/>simple crawler</a></h1><time>Oct 17, 2015</time><br><div class=description><p>半夜看了本<a href=http://www.qidian.com/Book/3313422.aspx>小说</a>觉得翻页太累</p><p>首先要解决的问题是找一个质量还过得去的小说站
然后写个<a href=https://github.com/yanyaoer/crawler>脚本</a>去把它爬下来章节合并到一起</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>import</span> fs from <span style=color:#2aa198>&#34;fs&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>import</span> { argv } from <span style=color:#2aa198>&#34;process&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>import</span> request from <span style=color:#2aa198>&#34;request&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>import</span> cheerio from <span style=color:#2aa198>&#34;cheerio&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>import</span> iconv from <span style=color:#2aa198>&#34;iconv-lite&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>import</span> sanitize from <span style=color:#2aa198>&#39;sanitize-html&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#268bd2>class</span> main {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#b58900>Object</span>.assign(<span style=color:#719e07>this</span>, {
</span></span><span style=display:flex><span>      path<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;./chapter.json&#39;</span>,
</span></span><span style=display:flex><span>      html<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;./reader.html&#39;</span>,
</span></span><span style=display:flex><span>      url<span style=color:#719e07>:</span> {
</span></span><span style=display:flex><span>        list<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;http://www.piaotian.net/html/6/6658/&#39;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      store<span style=color:#719e07>:</span> []
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  fetch(url, callback) {
</span></span><span style=display:flex><span>    request.get(url, {encoding<span style=color:#719e07>:</span> <span style=color:#cb4b16>null</span>}, (error, response, body)=&gt; {
</span></span><span style=display:flex><span>      <span style=color:#719e07>if</span> (<span style=color:#719e07>!</span>error <span style=color:#719e07>&amp;&amp;</span> response.statusCode <span style=color:#719e07>==</span> <span style=color:#2aa198>200</span>) {
</span></span><span style=display:flex><span>        <span style=color:#268bd2>let</span> $ <span style=color:#719e07>=</span> cheerio.load(iconv.decode(body, <span style=color:#2aa198>&#39;GBK&#39;</span>));
</span></span><span style=display:flex><span>        callback($, body);
</span></span><span style=display:flex><span>      } <span style=color:#719e07>else</span> {
</span></span><span style=display:flex><span>        console.log(url);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  runchapter() {
</span></span><span style=display:flex><span>    <span style=color:#719e07>this</span>.store.map(d=&gt; {
</span></span><span style=display:flex><span>      <span style=color:#719e07>if</span> (<span style=color:#719e07>!</span>d.content) {
</span></span><span style=display:flex><span>        <span style=color:#719e07>this</span>.fetch(<span style=color:#719e07>this</span>.url.list <span style=color:#719e07>+</span> d.href, ($, body)=&gt; {
</span></span><span style=display:flex><span>          <span style=color:#268bd2>let</span> content <span style=color:#719e07>=</span> iconv.decode(body, <span style=color:#2aa198>&#39;GBK&#39;</span>);
</span></span><span style=display:flex><span>          d.content <span style=color:#719e07>=</span> sanitize(content);
</span></span><span style=display:flex><span>          <span style=color:#719e07>this</span>.save();
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      } <span style=color:#719e07>else</span> {
</span></span><span style=display:flex><span>        console.log(<span style=color:#2aa198>&#39;runchapter fail: &#39;</span>, d.id, d.title);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    <span style=color:#719e07>this</span>.output();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  output() {
</span></span><span style=display:flex><span>    <span style=color:#586e75>//let content = this.store.slice(0, 2)
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>    <span style=color:#268bd2>let</span> content <span style=color:#719e07>=</span> <span style=color:#719e07>this</span>.store
</span></span><span style=display:flex><span>      .map(d=&gt; d.content)
</span></span><span style=display:flex><span>      .join(<span style=color:#2aa198>&#39;&lt;hr /&gt;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#268bd2>let</span> html <span style=color:#719e07>=</span> <span style=color:#586e75>`&lt;html&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>    &lt;head&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>      &lt;meta charset=&#34;utf8&#34; /&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>      &lt;style&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>        ul, table, div {
</span></span></span><span style=display:flex><span><span style=color:#586e75>          display: none;
</span></span></span><span style=display:flex><span><span style=color:#586e75>        }
</span></span></span><span style=display:flex><span><span style=color:#586e75>        hr {
</span></span></span><span style=display:flex><span><span style=color:#586e75>          height: 1px;
</span></span></span><span style=display:flex><span><span style=color:#586e75>          margin: 4rem 0;
</span></span></span><span style=display:flex><span><span style=color:#586e75>        }
</span></span></span><span style=display:flex><span><span style=color:#586e75>        body {
</span></span></span><span style=display:flex><span><span style=color:#586e75>          padding: 0 20%;
</span></span></span><span style=display:flex><span><span style=color:#586e75>          font:24px/1.5 &#39;Songti Sc&#39;;
</span></span></span><span style=display:flex><span><span style=color:#586e75>        }
</span></span></span><span style=display:flex><span><span style=color:#586e75>      &lt;/style&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>    &lt;/head&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>    &lt;body&gt;</span><span style=color:#2aa198>${</span>content<span style=color:#2aa198>}</span><span style=color:#586e75>&lt;/body&gt;&lt;/html&gt;`</span>;
</span></span><span style=display:flex><span>    fs.writeFileSync(<span style=color:#719e07>this</span>.html, html, <span style=color:#2aa198>&#39;utf8&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  reload() {
</span></span><span style=display:flex><span>    <span style=color:#719e07>this</span>.fetch(<span style=color:#719e07>this</span>.url.list, ($)=&gt; {
</span></span><span style=display:flex><span>      <span style=color:#719e07>this</span>.store <span style=color:#719e07>=</span> [];
</span></span><span style=display:flex><span>      $(<span style=color:#2aa198>&#39;.mainbody .centent ul li a&#39;</span>).map((id, d)=&gt; {
</span></span><span style=display:flex><span>        <span style=color:#268bd2>let</span> el <span style=color:#719e07>=</span> $(d);
</span></span><span style=display:flex><span>        <span style=color:#268bd2>let</span> href <span style=color:#719e07>=</span> el.attr(<span style=color:#2aa198>&#39;href&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#719e07>if</span> (<span style=color:#719e07>!</span>href.endsWith(<span style=color:#2aa198>&#39;.html&#39;</span>)) {
</span></span><span style=display:flex><span>          <span style=color:#719e07>return</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#719e07>this</span>.store.push({ id, href, title<span style=color:#719e07>:</span> el.text() })
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      <span style=color:#719e07>this</span>.save();
</span></span><span style=display:flex><span>      <span style=color:#719e07>this</span>.runchapter();
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  config(force){
</span></span><span style=display:flex><span>    <span style=color:#719e07>if</span> (force) {
</span></span><span style=display:flex><span>      <span style=color:#719e07>this</span>.reload();
</span></span><span style=display:flex><span>    } esle {
</span></span><span style=display:flex><span>      <span style=color:#268bd2>let</span> text <span style=color:#719e07>=</span> fs.readFileSync(<span style=color:#719e07>this</span>.path, <span style=color:#2aa198>&#39;utf8&#39;</span>).toString();
</span></span><span style=display:flex><span>      <span style=color:#719e07>this</span>.store <span style=color:#719e07>=</span> JSON.parse(text);
</span></span><span style=display:flex><span>      <span style=color:#719e07>this</span>.runchapter();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  save() {
</span></span><span style=display:flex><span>    fs.writeFileSync(<span style=color:#719e07>this</span>.path, JSON.stringify(<span style=color:#719e07>this</span>.store), <span style=color:#2aa198>&#39;utf8&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  init() {
</span></span><span style=display:flex><span>    <span style=color:#268bd2>let</span> force <span style=color:#719e07>=</span> argv[<span style=color:#2aa198>2</span>] <span style=color:#719e07>===</span> <span style=color:#2aa198>&#39;-f&#39;</span>;
</span></span><span style=display:flex><span>    console.log(<span style=color:#2aa198>&#39;run: &#39;</span>, argv[<span style=color:#2aa198>2</span>], force);
</span></span><span style=display:flex><span>    <span style=color:#719e07>this</span>.config(force);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#719e07>new</span> main().init();
</span></span></code></pre></div><p>于是就水出来一篇日志啦</p>&mldr;</div><a class=readmore href=/posts/simple-nodejs-crawler/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/send-notification-after-task-end/>send notification when task finish</a></h1><time>Oct 11, 2015</time><br><div class=description><p>终端里运行长时间任务(比如 <code>make systemimage</code>)的时候经常会切换到其他环境做别的事情
容易忘记查看之前的任务是否完成, 查到一些方法用在任务结束时发出通知</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75>#C-z 切到后台运行</span>
</span></span><span style=display:flex><span>fg; tput bel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># Mac OS X</span>
</span></span><span style=display:flex><span><span style=color:#586e75>#系统弹窗</span>
</span></span><span style=display:flex><span>osascript -e <span style=color:#2aa198>&#39;tell app &#34;System Events&#34; to display alert &#34;Build Completed&#34; message &#34;The checkout and build have completed.&#34;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>say <span style=color:#2aa198>&#34;Job finished&#34;</span> <span style=color:#586e75>#语音播报</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>#notification center</span>
</span></span><span style=display:flex><span>osascript -e <span style=color:#2aa198>&#39;display notification &#34;Job finished&#34; with title &#34;Alert&#34;&#39;</span>
</span></span><span style=display:flex><span>sudo gem install terminal-notifier
</span></span><span style=display:flex><span>terminal-notifier -message <span style=color:#2aa198>&#34;Job finished!&#34;</span> -title <span style=color:#2aa198>&#34;Alert&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># Ubuntu</span>
</span></span><span style=display:flex><span>notify-send <span style=color:#2aa198>&#34;Job finished!&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># KDE</span>
</span></span><span style=display:flex><span>kdialog --passivepopup <span style=color:#2aa198>&#39;Job finished&#39;</span>
</span></span></code></pre></div><p>还有 <a href=https://iterm2.com/documentation-triggers.html>iterm2 trigger</a> 也能用来触发通知, 高亮文字</p>&mldr;</div><a class=readmore href=/posts/send-notification-after-task-end/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/cname-with-yanyao-com/>create CNAME with internationalized domain name</a></h1><time>Oct 4, 2015</time><br><div class=description><p>前段时间买了个 <a href=https://en.wikipedia.org/wiki/Internationalized_domain_name>idn</a>: yányào.com 闲置了很长时间没动
趁着十一长假无所事事的机会, 把玩了一下 <a href=https://hexo.io>hexo</a> 挂到 yanyaoer.github.io</p><p>然后 CNAME 的时候掉坑了, 看到有人说30分钟生效傻傻等就不提了
实际上这个域名的 CNAME 内容应该用编码后的字符串而不是 yányào.com</p><p><a href=https://github.com/yanyaoer/yanyaoer.github.io/commit/7c0e4e6863904442d368e3ad5c822f8f189bb7fc#diff-adc4bfdb0829dae99e3699393e3fbaa4>https://github.com/yanyaoer/yanyaoer.github.io/commit/7c0e4e6863904442d368e3ad5c822f8f189bb7fc#diff-adc4bfdb0829dae99e3699393e3fbaa4</a></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#cb4b16>diff --git a/CNAME b/CNAME
</span></span></span><span style=display:flex><span><span style=color:#cb4b16>index 6cb647c..92d166c 100644
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span><span style=color:#dc322f>--- a/CNAME
</span></span></span><span style=display:flex><span><span style=color:#dc322f></span><span style=color:#719e07>+++ b/CNAME
</span></span></span><span style=display:flex><span><span style=color:#719e07></span><span style=color:#268bd2>@@ -1 +1 @@
</span></span></span><span style=display:flex><span><span style=color:#268bd2></span><span style=color:#dc322f>-yányào.com
</span></span></span><span style=display:flex><span><span style=color:#dc322f></span><span style=color:#719e07>+xn--ynyo-2nad.com
</span></span></span></code></pre></div>&mldr;</div><a class=readmore href=/posts/cname-with-yanyao-com/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/xtag-and-shadowdom/>xtag-and-shadowdom</a></h1><time>Oct 4, 2015</time><br><div class=description><p>最近在做的项目重构, 原本打算用 reactjs, 写了一些实验代码后心累无爱
找了个 domdiff 配合自定义标签和 shadowdom 的独有作用域也是爽 YY</p><p>可惜的是测试红米上的 android webview 版本(32?)不支持 ::shadow 伪类
inline 方式覆盖样式略嫌繁琐</p><h2 id=示例代码>示例代码</h2><h3 id=xtagjs>xtag.js</h3><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>let</span> dom <span style=color:#719e07>=</span> {
</span></span><span style=display:flex><span>  shadow(el) {
</span></span><span style=display:flex><span>    <span style=color:#719e07>return</span> el.createShadowRoot <span style=color:#719e07>?</span> el.createShadowRoot() <span style=color:#719e07>:</span> el.webkitCreateShadowRoot();
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  attr(el, prefix<span style=color:#719e07>=</span><span style=color:#2aa198>&#39;&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#719e07>return</span> <span style=color:#b58900>Object</span>.keys(el.dataset).map((d)=&gt; <span style=color:#586e75>`</span><span style=color:#2aa198>${</span>prefix<span style=color:#2aa198>}${</span>d<span style=color:#2aa198>}</span><span style=color:#586e75>=&#34;</span><span style=color:#2aa198>${</span>el.dataset[d]<span style=color:#2aa198>}</span><span style=color:#586e75>&#34;`</span>).join(<span style=color:#2aa198>&#39; &#39;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>document</span>.registerElement(<span style=color:#2aa198>&#39;x-image&#39;</span>, {
</span></span><span style=display:flex><span>  prototype<span style=color:#719e07>:</span> <span style=color:#b58900>Object</span>.create(HTMLElement.prototype, {
</span></span><span style=display:flex><span>    createdCallback<span style=color:#719e07>:</span> {
</span></span><span style=display:flex><span>      value() {
</span></span><span style=display:flex><span>        <span style=color:#586e75>//xtag 嵌套时这里读不到attr, 放到 attach
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>        console.log(<span style=color:#2aa198>&#39;onCreate::image&#39;</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    attachedCallback<span style=color:#719e07>:</span> {
</span></span><span style=display:flex><span>      value() {
</span></span><span style=display:flex><span>        console.log(<span style=color:#2aa198>&#39;onAttach::image&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#268bd2>let</span> shadow <span style=color:#719e07>=</span> dom.shadow(<span style=color:#719e07>this</span>);
</span></span><span style=display:flex><span>        shadow.innerHTML <span style=color:#719e07>=</span> <span style=color:#586e75>`&lt;style&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>            img { max-width: 100%; }
</span></span></span><span style=display:flex><span><span style=color:#586e75>          &lt;/style&gt;
</span></span></span><span style=display:flex><span><span style=color:#586e75>          &lt;img </span><span style=color:#2aa198>${</span>dom.attr(<span style=color:#719e07>this</span>)<span style=color:#2aa198>}</span><span style=color:#586e75> /&gt;`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#719e07>this</span>.onclick <span style=color:#719e07>=</span> (e) =&gt; {
</span></span><span style=display:flex><span>          console.log(<span style=color:#719e07>this</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// other x-tag;
</span></span></span></code></pre></div><h3 id=indexjs>index.js</h3><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>import</span> <span style=color:#2aa198>&#39;babel/polyfill&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>import</span> <span style=color:#2aa198>&#39;./xtag.js&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#268bd2>class</span> BaseView {
</span></span><span style=display:flex><span>  constructor(opt) {
</span></span><span style=display:flex><span>    <span style=color:#b58900>Object</span>.assign(<span style=color:#719e07>this</span>, {
</span></span><span style=display:flex><span>      root<span style=color:#719e07>:</span> dom(<span style=color:#2aa198>&#39;#app&#39;</span>)
</span></span><span style=display:flex><span>    }, opt);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  mount() {
</span></span><span style=display:flex><span>    console.log(<span style=color:#2aa198>&#39;event::mount&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  onCreate() {
</span></span><span style=display:flex><span>    console.log(<span style=color:#2aa198>&#39;event::create&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  onUpdate() {
</span></span><span style=display:flex><span>    console.log(<span style=color:#2aa198>&#39;event::update&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#268bd2>export</span> <span style=color:#719e07>default</span> <span style=color:#268bd2>class</span> BannerView <span style=color:#268bd2>extends</span> BaseView {
</span></span><span style=display:flex><span>  init(...args) {
</span></span><span style=display:flex><span>    <span style=color:#719e07>this</span>.mount(...args);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  render() {
</span></span><span style=display:flex><span>    <span style=color:#719e07>return</span> <span style=color:#586e75>`&lt;x-image data-src=&#34;</span><span style=color:#2aa198>${</span><span style=color:#719e07>this</span>.src<span style=color:#2aa198>}</span><span style=color:#586e75>&#34;
</span></span></span><span style=display:flex><span><span style=color:#586e75>                     data-href=&#34;</span><span style=color:#2aa198>${</span><span style=color:#719e07>this</span>.redirect_url<span style=color:#2aa198>}</span><span style=color:#586e75>&#34; /&gt;`</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=links>links</h2><p><a href=http://www.html5rocks.com/en/tutorials/webcomponents/customelements/>http://www.html5rocks.com/en/tutorials/webcomponents/customelements/</a>
<a href=http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-301/>http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-301/</a></p>&mldr;</div><a class=readmore href=/posts/xtag-and-shadowdom/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/remote-pbcopy-with-netcat/>remote pbcopy with netcat</a></h1><time>Jan 20, 2015</time><br><div class=description><h2 id=quick-start>Quick start</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#719e07>while</span> <span style=color:#719e07>(</span><span style=color:#b58900>true</span><span style=color:#719e07>)</span>; <span style=color:#719e07>do</span> nc -l <span style=color:#2aa198>2224</span> | pbcopy; <span style=color:#719e07>done</span>
</span></span><span style=display:flex><span><span style=color:#586e75>#If your laptop is running linux, replacing pbcopy with xcopy should work:</span>
</span></span><span style=display:flex><span><span style=color:#586e75>#while (true); do nc -l 2224 | xcopy; done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>echo</span> <span style=color:#2aa198>&#34;This text gets sent to clipboard&#34;</span> | nc localhost <span style=color:#2aa198>2224</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>echo</span> <span style=color:#2aa198>&#34;RemoteForward 2224 localhost:2224&#34;</span> &gt;&gt; ~/.ssh/config
</span></span><span style=display:flex><span>ssh remote -t <span style=color:#2aa198>&#39;cat blablabla | nc -q0 localhost 2224&#39;</span>
</span></span></code></pre></div><h2 id=daemonizing-pbcopy>Daemonizing pbcopy</h2><p><code>launchctl load ~/Library/LaunchAgents/local.pbcopy.plist</code></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
</span></span><span style=display:flex><span>&lt;!DOCTYPE plist PUBLIC &#34;-//Apple Computer//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;
</span></span><span style=display:flex><span>&lt;plist version=&#34;1.0&#34;&gt;
</span></span><span style=display:flex><span>&lt;dict&gt;
</span></span><span style=display:flex><span>    &lt;key&gt;Label&lt;/key&gt;
</span></span><span style=display:flex><span>    &lt;string&gt;localhost.pbcopy&lt;/string&gt;
</span></span><span style=display:flex><span>    &lt;key&gt;ProgramArguments&lt;/key&gt;
</span></span><span style=display:flex><span>    &lt;array&gt;
</span></span><span style=display:flex><span>       &lt;string&gt;/usr/bin/pbcopy&lt;/string&gt;
</span></span><span style=display:flex><span>    &lt;/array&gt;
</span></span><span style=display:flex><span>    &lt;key&gt;inetdCompatibility&lt;/key&gt;
</span></span><span style=display:flex><span>    &lt;dict&gt;
</span></span><span style=display:flex><span>       &lt;key&gt;Wait&lt;/key&gt;
</span></span><span style=display:flex><span>       &lt;false/&gt;
</span></span><span style=display:flex><span>    &lt;/dict&gt;
</span></span><span style=display:flex><span>    &lt;key&gt;Sockets&lt;/key&gt;
</span></span><span style=display:flex><span>    &lt;dict&gt;
</span></span><span style=display:flex><span>       &lt;key&gt;Listeners&lt;/key&gt;
</span></span><span style=display:flex><span>       &lt;dict&gt;
</span></span><span style=display:flex><span>           &lt;key&gt;SockServiceName&lt;/key&gt;
</span></span><span style=display:flex><span>           &lt;string&gt;2224&lt;/string&gt;
</span></span><span style=display:flex><span>           &lt;key&gt;SockNodeName&lt;/key&gt;
</span></span><span style=display:flex><span>           &lt;string&gt;127.0.0.1&lt;/string&gt;
</span></span><span style=display:flex><span>       &lt;/dict&gt;
</span></span><span style=display:flex><span>    &lt;/dict&gt;
</span></span><span style=display:flex><span>&lt;/dict&gt;
</span></span><span style=display:flex><span>&lt;/plist&gt;
</span></span></code></pre></div><h2 id=remote-pbcopy>Remote pbcopy</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp pbcopy remote:/path_to/pbcopy
</span></span><span style=display:flex><span>chmod a+x path_to/pbcopy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>#!/bin/bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#719e07>[</span> -n <span style=color:#2aa198>&#34;</span><span style=color:#268bd2>$SSH_CLIENT</span><span style=color:#2aa198>&#34;</span> <span style=color:#719e07>]</span> <span style=color:#719e07>&amp;&amp;</span> <span style=color:#268bd2>SESSION_TYPE</span><span style=color:#719e07>=</span><span style=color:#2aa198>&#34;remote&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#719e07>if</span> <span style=color:#719e07>[[</span> <span style=color:#268bd2>$SESSION_TYPE</span> <span style=color:#719e07>==</span> <span style=color:#2aa198>&#34;remote&#34;</span> <span style=color:#719e07>]]</span>; <span style=color:#719e07>then</span>
</span></span><span style=display:flex><span>  cat | nc -q0 localhost <span style=color:#2aa198>2224</span>
</span></span><span style=display:flex><span><span style=color:#719e07>else</span>
</span></span><span style=display:flex><span>  cat | pbcopy
</span></span><span style=display:flex><span><span style=color:#719e07>fi</span>
</span></span></code></pre></div><h2 id=links>links</h2><p><a href=http://brettterpstra.com/2014/02/19/remote-pbcopy-on-os-x-systems/>http://brettterpstra.com/2014/02/19/remote-pbcopy-on-os-x-systems/</a></p>&mldr;</div><a class=readmore href=/posts/remote-pbcopy-with-netcat/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/postfix-forward-mail/>forward email by postfix</a></h1><time>Oct 6, 2014</time><br><div class=description><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo aptitude install postfix
</span></span><span style=display:flex><span>hostname -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># sudo vim /etc/postfix/main.cf</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>myhostname</span> <span style=color:#719e07>=</span> example.com
</span></span><span style=display:flex><span><span style=color:#268bd2>myorigin</span> <span style=color:#719e07>=</span> example.com
</span></span><span style=display:flex><span><span style=color:#268bd2>mydestination</span> <span style=color:#719e07>=</span> example1.com, example2.com, ...
</span></span><span style=display:flex><span><span style=color:#268bd2>virtual_alias_maps</span> <span style=color:#719e07>=</span> hash:/etc/postfix/virtual
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># sudo vim /etc/postfix/virtual</span>
</span></span><span style=display:flex><span>@example1.com    name@forward.com
</span></span><span style=display:flex><span>@example2.com    name@forward.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo postmap /etc/postfix/virtual
</span></span><span style=display:flex><span>sudo /etc/init.d/postfix reload
</span></span></code></pre></div><p><a href=https://wiki.debian.org/Postfix#Forward_Emails>https://wiki.debian.org/Postfix#Forward_Emails</a></p><p><a href=https://www.linode.com/docs/email/postfix/basic-postfix-email-gateway-on-debian-6-squeeze>https://www.linode.com/docs/email/postfix/basic-postfix-email-gateway-on-debian-6-squeeze</a></p><p><a href=https://www.debian-administration.org/article/243/Handling_mail_for_multiple_virtual_domains_with_postfix>https://www.debian-administration.org/article/243/Handling_mail_for_multiple_virtual_domains_with_postfix</a></p>&mldr;</div><a class=readmore href=/posts/postfix-forward-mail/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/mitmproxy/>mitmproxy</a></h1><time>Aug 20, 2014</time><br><div class=description><p><a href=http://mitmproxy.org>mitmproxy</a> 是个命令行下查看/修改 http 请求的交互式工具</p><p>#截图
<img src=http://mitmproxy.org/doc/screenshots/mitmproxy.png alt=screenshoot>
<img src=http://mitmproxy.org/doc/screenshots/mitmproxy-flowview.png alt=screenshoot></p><p>#安装</p><pre><code>sudo apt-get install python-dev libffi-dev
pip install mitmproxy
</code></pre><p>#使用</p><p><strong>ubuntu 上启动 mitmproxy</strong><br>mitmproxy &ndash;host</p><p><strong>手机 设置 -> WLAN -> 代理</strong><br>主机名: ubuntu 的 ip<br>端口: 8080</p><p>然后访问网络就会在 mitmproxy 里看到请求记录(如截图)</p><p>#快捷键</p><p>j,k 上下移动<br>enter 进入<br>tab 切换 request/response</p><p>#参考
<a href=http://mitmproxy.org/doc/mitmproxy.html>http://mitmproxy.org/doc/mitmproxy.html</a><br><a href=http://blog.philippheckel.com/2013/07/01/how-to-use-mitmproxy-to-read-and-modify-https-traffic-of-your-phone/>http://blog.philippheckel.com/2013/07/01/how-to-use-mitmproxy-to-read-and-modify-https-traffic-of-your-phone/</a></p>&mldr;</div><a class=readmore href=/posts/mitmproxy/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/brick-intro/>brick intro</a></h1><time>Aug 28, 2013</time><br><div class=description><p>#Introducing Brick: Minimal-markup Web Components for Faster App Development
#介绍 brick: 用于快速开发 webapp 的自定义标签组件</p><p><a href=https://hacks.mozilla.org/2013/08/introducing-brick-minimal-markup-web-components-for-faster-app-development/>https://hacks.mozilla.org/2013/08/introducing-brick-minimal-markup-web-components-for-faster-app-development/</a></p><p>Those of you on the cutting HTML5 edge may have already heard of the exciting Web Components specification. If you haven’t, you’ll probably want to read up on what makes this so exciting, but long story short, Web Components promise to open up a new realm of development by letting web developers write custom, reusable HTML tags. Think of them as JavaScript plugins without the need for additional code initialization or boilerplate markup/styling.</p>&mldr;</div><a class=readmore href=/posts/brick-intro/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/my-osx-setup/>my osx setup</a></h1><time>Jun 9, 2013</time><br><div class=description><p>#setting</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># Enable full keyboard access for all controls
</span></span><span style=display:flex><span>defaults write NSGlobalDomain AppleKeyboardUIMode -int 3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Disable menu bar transparency
</span></span><span style=display:flex><span>defaults write NSGlobalDomain AppleEnableMenuBarTransparency -bool false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Allow quitting Finder via ⌘ + Q; doing so will also hide desktop icons
</span></span><span style=display:flex><span>defaults write com.apple.finder QuitMenuItem -bool true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Avoid creating .DS_Store files on network volumes
</span></span><span style=display:flex><span>defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Disable the warning when changing a file extension
</span></span><span style=display:flex><span>defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Enable tap to click (Trackpad)
</span></span><span style=display:flex><span>defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Enable Safari’s debug menu
</span></span><span style=display:flex><span>defaults write com.apple.Safari IncludeInternalDebugMenu -bool true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># To pin the dock to the right bottom
</span></span><span style=display:flex><span>defaults write com.apple.dock pinning -string end
</span></span><span style=display:flex><span>defaults write com.apple.dock orientation -string right
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Only Show Open Applications In The Dock
</span></span><span style=display:flex><span>defaults write com.apple.dock static-only -bool true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>defaults write com.apple.dock tilesize -int 24
</span></span><span style=display:flex><span>defaults write com.apple.finder QLEnableTextSelection -bool true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># disable dashboard
</span></span><span style=display:flex><span>defaults write com.apple.dashboard mcx-disabled -boolean true
</span></span></code></pre></div><p>#<a href=http://itunes.apple.com/us/app/xcode/>xcode</a> with <a href=https://developer.apple.com/downloads>Command Line Tools</a></p>&mldr;</div><a class=readmore href=/posts/my-osx-setup/>Read more ⟶</a></section><ul class=pagination><span class="page-item page-prev"><a href=/page/2/ class=page-link aria-label=Previous><span aria-hidden=true>← Prev</span></a>
</span><span class="page-item page-next"></span></ul></main><footer><div style=display:flex><a class=soc href=/index.xml rel=me title=RSS><i data-feather=rss></i></a>
<a class=border></a><a class=soc href=/daydayup/ rel=me title=Status><i data-feather=activity></i></a>
<a class=border></a><a class=soc href=https://yankuiyi.com/ rel=me title=microfeed><i data-feather=radio></i></a>
<a class=border></a><a class=soc href=https://fouland.com/ rel=me title=Logseq><i data-feather=inbox></i></a>
<a class=border></a><a class=soc href=https://at.yadanhe.com/ rel=me title=Mastodon><i data-feather=at-sign></i></a>
<a class=border></a></div><div class=footer-info>2024 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>