<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>yányào.com | Home </title><link rel=icon type=image/png href=#ZgotmplZ><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta property="og:image" content><link rel=alternate type=application/rss+xml href=https://xn--ynyo-2nad.com/index.xml title=yányào.com><meta property="og:url" content="https://xn--ynyo-2nad.com/"><meta property="og:site_name" content="yányào.com"><meta property="og:title" content="yányào.com"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="yányào.com"><script src=https://xn--ynyo-2nad.com/js/feather.min.js></script><link href=https://xn--ynyo-2nad.com/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://xn--ynyo-2nad.com/css/main.5cebd7d4fb2b97856af8d32a6def16164fcf7d844e98e236fcb3559655020373.css></head><body><div class=content><header><div class=main><a href=https://xn--ynyo-2nad.com/>yányào.com</a></div><nav><a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/tags>Tags</a></nav></header><main class=list><div class=site-description><p>looking a wood sprite in the forest</p></div><section class=list-item><h1 class=title><a href=/posts/pandoc-md2pdf/>Pandoc generate pdf from markdown</a></h1><time>Jul 25, 2024</time><br><div class=description><h2 id=intro>Intro</h2><p>始终不太习惯 word/wps 类工具编辑文本，再一次尝试用 <code>pandoc</code> 来生成 pdf，算是初步搞明白一点玩法，本文略过 markdown 的部分主要记录 <code>latex</code> 相关设定内容。</p><ul><li><code>wkhtmltopdf</code> 也是一个选项，但是转 HTML 再生成 pdf 就没啥挑战了额哈哈</li></ul><h2 id=setup>Setup</h2><p>首先完整安装 latex 包</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ brew uninstall --cask basictex
</span></span><span style=display:flex><span>$ brew install --cask mactex
</span></span></code></pre></div><h2 id=latex-template>Latex template</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#268bd2>title</span>: <span style=color:#2aa198>&#34;Your article title here&#34;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>date</span>: 2023-02-20
</span></span><span style=display:flex><span><span style=color:#268bd2>fontsize</span>: 12pt
</span></span><span style=display:flex><span><span style=color:#586e75># fc-list :lang=zh</span>
</span></span><span style=display:flex><span><span style=color:#586e75>#mainfont: &#34;PingFang SC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>mainfont</span>: <span style=color:#2aa198>&#34;Sarasa Mono SC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#586e75># monofont: &#34;FantasqueSansM Nerd Font Mono&#34;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>monofont</span>: <span style=color:#2aa198>&#34;Sarasa Mono SC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#586e75># 中文换行支持</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>lang</span>: zh-CN
</span></span><span style=display:flex><span><span style=color:#268bd2>geometry</span>: margin=2cm
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># 设置双栏</span>
</span></span><span style=display:flex><span><span style=color:#586e75># classoption=twocolumn</span>
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><p>在 markdown 文档的最前面加入以上 metadata 简化命令参数设定，实际效果等价于</p>&mldr;</div><a class=readmore href=/posts/pandoc-md2pdf/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/flair-58/>Flair-58 Espresso Maker</a></h1><time>Feb 8, 2022</time><br><div class=description><h2 id=flair-58>flair-58</h2><p><a href=https://flairespresso.com/product/flair-58/>https://flairespresso.com/product/flair-58/</a></p><p><img src=/flair-coffee.jpg alt></p><p>周末浪费了2天豆子，终于折腾出比较理想的设定</p><ul><li>预热：浅烘 = 3档，中烘 = 2档，深烘 = 1档</li><li>磨豆：C40 调到 8 格(浅烘豆 +=1)</li></ul><p>奶泡机没到位，先用娃的小奶锅煮 200ml Oatly 燕麦奶，稍热就好，没有打出泡沫也就无所谓拉花了<br>PlanB: 微波炉加热 + <a href=https://www.ikea.cn/cn/zh/p/produkt-pu-luo-da-da-mo-qi-hei-se-70301165/>宜家 ¥9.9 手持奶泡器</a></p><p>我买的优化后版本默认配无底手柄 + 58mm 18g粉碗，而上半年批次的好像是 20g粉碗，底部没有凹弧线，然后分水网和冲煮头是一体的，每杯都得拆下来清理，现在只需要拆手柄洗洗粉碗和分水网就好，方便连续出杯(但是对于没有多个手柄和粉碗的初阶用户来说，重新填粉加水的操作并不连续 -.-)<br>群里有大佬<a href="https://docs.google.com/document/d/1szvhjTE2F7lzhr38phggVUO50fkbddq0/edit?usp=sharing&amp;ouid=115932911354635105266&amp;rtpof=true&amp;sd=true">改装了底座和支架的方案</a>，解决下压前倾问题和使用12cm+的秤</p><p>而无底手柄安装还不太熟练，经常要弯腰低头去看小翅膀有没有卡到位，然后注水再安装压力表(顺便当预浸泡)，18g豆出 36g液体，如果粉磨得过细，下压会很费劲</p><p>虽然目前 5-9bar 之间压的曲线还不太稳定，偶尔通道也不太顺滋到杯外，但是香浓的 crema 已然远超预期(其实很容易过萃，但是家属喝不出来😂)</p><p>试了下用冰的屈臣氏做 coffee soda，难喝🤢</p><p>好多想买的配件：拉花奶缸、粉锤、布粉器、鼠尾粉碗、粉饼垃圾盒</p><p><strong>update: 2022-08-19 14:09:08</strong></p><p>买了新的拉花缸和称，但是懒到完全不想碰牛奶，only pure coffee and water&mldr;</p><p>早晨的冲煮开始逐渐暴躁，直接磨58g粉分3次装填、下压、出液到一个杯里，再加冰块分装成两份 long black 出门，少洗两次杯子动作也更流畅～大概15-20分钟完成</p>&mldr;</div><a class=readmore href=/posts/flair-58/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/toy/>剁手好物推荐</a></h1><time>Sep 24, 2021</time><br><div class=description><ul><li>Insta360 GO2 拇指运动相机</li><li>巷贩小酒 - 东方甄选金酒</li><li>Reebok royal techque 板鞋</li><li>ALTRA Escalante 2.5 轻量零落差跑鞋</li><li>SENNHEISER IE300 耳机</li><li>PhD 能量棒</li></ul>&mldr;</div><a class=readmore href=/posts/toy/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/volvo-v60/>Volvo v60</a></h1><time>Jun 30, 2021</time><br><div class=description><p>因为家庭新成员加入，所以买车的优先级提了上来。一开始考虑大尺寸6/7座suv，能装全家人短途出行，比如highlander, outlander, explorer, Pajero&mldr;后来因为今年各种新款上市，到最终提车时间有点晚，再加上城市拥堵和停车问题，回归到最初的选项也是一直种草的旅行车Volvo v60</p><p>中间还去看过Jaguar和Alfa Romeo，可惜后排空间有点小，对外型内饰非常满意，动力和操控也很可以，尤其Julie的前脸颜值太命中我了，一直对mx5这类笑脸无法抗拒…</p><p>V60在4s店试驾的豪华版，刚开始还挺不适应转向手感和油门刹车的，感觉都很沉很重。比起来以前开过的各种小钢炮和家用轿车，沉着有余灵活不够，前期不熟悉的时候操作起来都得小心翼翼。</p><p>最后订车选了致远焰影蓝运动款，因为厂家直销的关系也没讲价，就跟销售要了行车记录仪和儿童座椅。目前开两个月小一千公里的行程，大概总结些点吧</p><ul><li>外观线条比例，审美观因人而异，但是V60各处都在我的区间内</li><li>nappa皮座椅舒适和支撑都很到位，前排有可调的腿拖和腰撑。对豪华版的实木装饰水晶档杆其实没啥需求，氛围灯也蛮简约，没有那么夜店风。可惜选配的交车时间太长，不然座椅通风、冬季包、米色内饰都想加</li><li>后排空间坐两人还行，但是中间的地台太高，不适合长途5人出行</li><li>后备箱就不用夸了，狗子的航空箱一直塞在里面，出去玩很方便，去宜家就把后座放平。6月份搬家就跑了两趟，上次搬家借老王的a3可拉了56趟</li><li>48v电机+autohold，起步平顺没有纯燃油车型起步轰发动机那个颤抖</li><li>低转油门动力响应略有延迟，升档不算很迅速，不过相比起golf，508要好很多</li><li>油耗市区日常11升百公里，跑机场高速能到6.1左右，平时一个月加一次满箱油，推荐95号</li><li>方向盘虚位明显，过弯会习惯性多打一些位置，转向比hatchback车型都要重许多。前脸两侧的存在感明显，低坐姿的时候会开得谨慎，反而不会觉得屁股有什么阻碍</li><li>底盘确实在开过的车里算得上优秀，过弯和滤震都很扎实。静音实属一般，风噪胎噪在后排(或者车速超过100)尤其明显，所以也就不考虑顶上行李箱</li><li>autopilot 模式在跑高速时非常愉悦，车道保持比我打方向顺滑多了，跟前车保持车距也很可靠，另外养成了并线前一定先打灯的习惯，否则车子会自己修正。能称为瑕疵的就是自动刹车不够线性，乘客会有明显的拉扯感甚至点头；拥堵路段还得切回手动模式，跟车距离在我这边太容易被加塞</li></ul>&mldr;</div><a class=readmore href=/posts/volvo-v60/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/self-host-maddy-mail-server/>Self Host Maddy Mail Server</a></h1><time>Dec 1, 2020</time><br><div class=description><h2 id=maddy>maddy</h2><blockquote><p>Composable all-in-one mail server. <a href=https://github.com/foxcpp/maddy>https://github.com/foxcpp/maddy</a></p></blockquote><p>准备自建系列服务替换掉 google 全家桶，先试了传统的 Postfix, Dovecot, OpenDKIM, OpenSPF, OpenDMARC 套餐，但是本人水平菜，机器配置也不高，折腾两天还没跑起来，正好看到订阅的 changelog 推荐了 maddy <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> 于是搓搓手气试试这个邮局方案，以下是满足个人喜好的优点</p><ul><li>基于 golang 生态依赖少，方便打镜像</li><li>验证数据存在 sqlite 里也很轻量</li><li>没有 web 端，只需要 imap + thunderbird 即可</li><li>配置文件相对简单</li></ul><h2 id=install>install</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p /data/maddy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># hard link caddy&#39;s crt and key to maddy</span>
</span></span><span style=display:flex><span>ln var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/<span style=color:#2aa198>${</span><span style=color:#268bd2>domain</span><span style=color:#2aa198>}</span>/<span style=color:#2aa198>${</span><span style=color:#268bd2>domain</span><span style=color:#2aa198>}</span>.crt /data/maddy/<span style=color:#2aa198>${</span><span style=color:#268bd2>domain</span><span style=color:#2aa198>}</span>.crt
</span></span><span style=display:flex><span>ln var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/<span style=color:#2aa198>${</span><span style=color:#268bd2>domain</span><span style=color:#2aa198>}</span>/<span style=color:#2aa198>${</span><span style=color:#268bd2>domain</span><span style=color:#2aa198>}</span>.key /data/maddy/<span style=color:#2aa198>${</span><span style=color:#268bd2>domain</span><span style=color:#2aa198>}</span>.key
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># foxcpp/maddy:v0.4.2</span>
</span></span><span style=display:flex><span>podman run <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  --name maddy <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  -v /data/maddy:/data <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  -p 25:25 <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  -p 143:143 <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  -p 587:587 <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  -p 993:993 <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  -p 465:465 <span style=color:#cb4b16>\
</span></span></span><span style=display:flex><span><span style=color:#cb4b16></span>  yanyaoer/maddy:master
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># add user</span>
</span></span><span style=display:flex><span>podman run --rm -it -v /data/maddy:/data --entrypoint /bin/maddyctl yanyaoer/maddy:master creds create yanyao@mail.yadanhe.com
</span></span></code></pre></div><p>参考文档配置<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> 完后发送邮件对方可收，本地 thunderbird 接收回复邮件时有问题</p>&mldr;</div><a class=readmore href=/posts/self-host-maddy-mail-server/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/utteranc-comments/>Utteranc Comments</a></h1><time>Oct 30, 2020</time><br><div class=description><p>utterances - A lightweight comments widget built on GitHub issues. Use GitHub issues for blog comments, wiki pages and more!</p><h2 id=install>install</h2><ol><li><p>install <a href=https://github.com/apps/utterances>utterances</a> on your repo</p></li><li><p>add the script to your template</p></li></ol><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;script src=&#34;https://utteranc.es/client.js&#34;
</span></span><span style=display:flex><span>        repo=&#34;[ENTER REPO HERE]&#34;
</span></span><span style=display:flex><span>        issue-term=&#34;pathname&#34;
</span></span><span style=display:flex><span>        theme=&#34;github-light&#34;
</span></span><span style=display:flex><span>        crossorigin=&#34;anonymous&#34;
</span></span><span style=display:flex><span>        async&gt;
</span></span><span style=display:flex><span>&lt;/script&gt;
</span></span></code></pre></div><p>for exsamples <a href=https://github.com/yanyaoer/yanyaoer.github.io/commit/f2508ce7557d372f909f68ee32371f86895fd92f>https://github.com/yanyaoer/yanyaoer.github.io/commit/f2508ce7557d372f909f68ee32371f86895fd92f</a></p><p>done.</p>&mldr;</div><a class=readmore href=/posts/utteranc-comments/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/zotero/>Zotero as personal knowledge management</a></h1><time>Jul 2, 2020</time><br><div class=description><p><a href=https://www.zotero.org/>Zotero</a> 常用于科研的文献管理，由 firefox 浏览器插件发展到现在有了独立的桌面和<a href=https://github.com/mickstar/Zoo-For-Zotero>移动客户端</a>。</p><p><img src=/zotero.png alt></p><ul><li>本身具备简易的 rss 订阅功能可以用来追踪论文的更新</li><li>注册在线账户后支持导出资料库给其他同学订阅</li><li>浏览器插件 <a href=https://github.com/zotero/zotero-connectors>zotero connectors</a> 则类似各类笔记应用的 web clipper，方便导入各种资料。<strong>注意科学上网加载完整页面后再进行保存</strong></li><li>通过插件可以扩展出许多其他功能，比如文件同步、高级档案管理</li></ul><h2 id=quickstart>quickstart</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>brew cask install zotero
</span></span></code></pre></div><p>这里简单用 <a href=https://github.com/yanyaoer/caddy2-webdav>caddy2 搭建 webdav</a> 来同步附件，就没用高级的 <a href=http://zotfile.com/>zotfile</a></p><p>至于自带的笔记功能怎么说呢～ 已经适应不能这种风格了</p><table><thead><tr><th style=text-align:left>add-ons</th><th style=text-align:left>link</th></tr></thead><tbody><tr><td style=text-align:left>quicklook</td><td style=text-align:left><a href=https://github.com/mronkko/ZoteroQuickLook/releases>https://github.com/mronkko/ZoteroQuickLook/releases</a></td></tr><tr><td style=text-align:left>markdown</td><td style=text-align:left><a href=https://addons.thunderbird.net/zh-cn/thunderbird/addon/markdown-here-xul/>https://addons.thunderbird.net/zh-cn/thunderbird/addon/markdown-here-xul/</a></td></tr></tbody></table><h2 id=subscription>subscription</h2><ul><li><p><a href=https://arxiv.org/list/cs/recent>https://arxiv.org/list/cs/recent</a>
康奈尔大学提供的免费论文预览平台，主要订阅 cs.SD 音频相关更新</p></li><li><p><a href=https://scholar.google.com/>https://scholar.google.com/</a></p></li><li><p><a href=https://academic.microsoft.com/>https://academic.microsoft.com/</a>
谷歌学术、微软学术也可以用来搜索一些关键词并订阅推送</p></li><li><p><a href=https://www.storkapp.me/>https://www.storkapp.me/</a> 提供关键词订阅推送到邮箱</p></li><li><p><a href=https://sci-hub.tw/>https://sci-hub.tw/</a> 实在找不到的下载就靠毛子的共享服务</p></li></ul><p>将码农常用的文档工具 gitbook 转为 pdf</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew cask install calibre
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo npm install -g gitbook-cli
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gitbook install  <span style=color:#586e75># for gitbook plugin</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>git clone https://github.com/prometheus/docs.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gitbook pdf
</span></span></code></pre></div><p>ps: gitbook 开源版本已经很久不维护了，可以换到 <a href=https://github.com/honkit/honkit>honkit</a> fork 的版本</p>&mldr;</div><a class=readmore href=/posts/zotero/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/rss2email/>Rss2email</a></h1><time>Jun 23, 2020</time><br><div class=description><p>距离上次从 <a href=https://blogtrottr.com>https://blogtrottr.com</a> 迁移 rss 订阅到 feedly 差不多五六年了，
这会网络不可用的状况又变得严重些，干脆还是用自建服务来接收感兴趣的内容，
当然备选方案也不少:</p><ul><li><a href=https://github.com/miniflux/miniflux>https://github.com/miniflux/miniflux</a></li><li><a href=https://github.com/SSilence/selfoss>https://github.com/SSilence/selfoss</a></li><li><a href=https://github.com/FreshRSS/FreshRSS>https://github.com/FreshRSS/FreshRSS</a></li><li><a href=https://git.tt-rss.org/fox/tt-rss>https://git.tt-rss.org/fox/tt-rss</a></li></ul><p>出于复古心理顺便减少对应的 app 安装选择问题，又选择了回归 email 方式订阅更新</p><h2 id=安装配置>安装配置</h2><p>rss2email 的安装到简单，参考 <a href=https://github.com/rss2email/rss2email>官方文档</a>
直接 <code>apt install rss2email</code>，默认配置会发送文本邮件，修改 <code>html-mail=True</code>，
在我的环境里 smtp over sendgrid 很容易超配额，sendmail 基本发送不出去，
就配上 imap.google 账户自己发给自己啦～</p><p>从 feedly 导出 opml 文件然后 <code>r2e opmlimport</code> 完事大吉</p><p>需要注意的是，在 <code>r2e run</code> 的执行过程中对配置文件进行修改非常容易被覆盖 <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>，不要同时搞太多操作就好，</p><p><strong>update: 2020-09-18 17:34:49</strong></p><p>修改参数 <code>force-from = True</code>，默认会从 feed 里优先提取作者或者发布站点的邮箱，导致 gmail 过滤器失败</p><h2 id=定时任务>定时任务</h2><p>现代 linux 发行版本(比如这里用的 ubuntu 20.04)，默认不带 cronjob 服务，改为 systemd 来管理各种服务，定时任务的写法稍微麻烦了些，先用当前 user 权限来 <code>$HOME/.config/systemd/user</code> 写入定时任务配置</p>&mldr;</div><a class=readmore href=/posts/rss2email/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/bitwarden_rs_with_podman/>Deploy bitwarden_rs with podman</a></h1><time>Jun 4, 2020</time><br><div class=description><p>bitwarden_rs<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> 是个用 rust/rocket 编写的非官方 api 实现，
<a href=https://github.com/bitwarden/server>dotnet</a> 版本有点儿不太适合手头的部署环境</p><p>这里用比较现代的 podman<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> 来运行 docker 服务</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>podman run -d --name bitwarden -v /bw-data/:/data/:Z -e <span style=color:#268bd2>ROCKET_PORT</span><span style=color:#719e07>=</span><span style=color:#2aa198>8080</span> -p 8080:8080 bitwardenrs/server:latest
</span></span><span style=display:flex><span>podman generate systemd --name bitwarden --files
</span></span><span style=display:flex><span>mv container-bitwarden.service /etc/systemd/system/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>systemctl --user <span style=color:#b58900>enable</span> /etc/systemd/system/container-bitwarden.service
</span></span><span style=display:flex><span>systemctl --user start container-bitwarden.service
</span></span></code></pre></div><p>然后用 nginx 或者 caddy 代理一下 8080 端口即可连接客户端</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install bitwarden-cli  <span style=color:#586e75># npm install -g @bitwarden/cli</span>
</span></span><span style=display:flex><span>bw config server https://bw.myserver.com
</span></span></code></pre></div><p><strong>update 2021-04-01</strong> build bitwaden_rs from source</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#586e75># install rust</span>
</span></span><span style=display:flex><span>apt install git make gcc libssl<span style=color:#719e07>-</span>dev pkg<span style=color:#719e07>-</span>config curl
</span></span><span style=display:flex><span>curl <span style=color:#719e07>--</span>proto <span style=color:#2aa198>&#39;=https&#39;</span> <span style=color:#719e07>--</span>tlsv1<span style=color:#719e07>.</span><span style=color:#2aa198>2</span> <span style=color:#719e07>-</span>sSf https:<span style=color:#719e07>//</span>sh<span style=color:#719e07>.</span>rustup<span style=color:#719e07>.</span>rs <span style=color:#719e07>|</span> sh
</span></span><span style=display:flex><span>source <span style=color:#719e07>$</span>HOME<span style=color:#719e07>/.</span>cargo<span style=color:#719e07>/</span>env
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># build bitwarden_rs</span>
</span></span><span style=display:flex><span>git clone https:<span style=color:#719e07>//</span>github<span style=color:#719e07>.</span>com<span style=color:#719e07>/</span>dani<span style=color:#719e07>-</span>garcia<span style=color:#719e07>/</span>bitwarden_rs<span style=color:#719e07>/</span>
</span></span><span style=display:flex><span>cd bitwarden_rs<span style=color:#719e07>/</span>
</span></span><span style=display:flex><span>cargo build <span style=color:#719e07>--</span>features sqlite <span style=color:#719e07>--</span>release
</span></span><span style=display:flex><span>cp target<span style=color:#719e07>/</span>release<span style=color:#719e07>/</span>bitwarden_rs <span style=color:#719e07>/</span>usr<span style=color:#719e07>/</span>local<span style=color:#719e07>/</span>bin<span style=color:#719e07>/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># download bw_web_vault from https://github.com/dani-garcia/bw_web_builds/releases</span>
</span></span></code></pre></div><p>edit /etc/systemd/system/bitwarden.service</p>&mldr;</div><a class=readmore href=/posts/bitwarden_rs_with_podman/>Read more ⟶</a></section><section class=list-item><h1 class=title><a href=/posts/minio-storage-service/>Minio Storage Service</a></h1><time>Jun 2, 2020</time><br><div class=description><p><a href=https://min.io>min.io</a> 来自前 glusterFS 团队的分布式存储项目，
兼容 aws s3 / google cloud storage 接口，支持多磁盘、多节点，伸缩扩容方便，
golang 编写+单执行文件部署，非常适合用 k8s 编排复制来搭建私有对象存储服务</p><p><strong>没有生产环境的使用经验，以下仅用于业余尝鲜</strong> <del>六一节礼物</del></p><h2 id=gnulinux-下载安装>GNU/Linux 下载安装</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://dl.min.io/server/minio/release/linux-amd64/minio -O /usr/local/bin/minio
</span></span><span style=display:flex><span>chmod +x /user/local/bin/minio
</span></span></code></pre></div><h2 id=添加用户组和配置文件>添加用户、组和配置文件</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>groupadd --system minio
</span></span><span style=display:flex><span>useradd --system --gid minio --shell /usr/sbin/nologin --comment <span style=color:#2aa198>&#34;Minio file server&#34;</span> minio
</span></span><span style=display:flex><span>mkdir -p /data/minio
</span></span><span style=display:flex><span>chown -R minio:minio /data/minio
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># replace minio.service with your own config, eg. User,Group</span>
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/minio/minio-service/master/linux-systemd/minio.service -O /etc/systemd/system/minio.service
</span></span></code></pre></div><h2 id=配置端口和密钥>配置端口和密钥</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># optional. run `uuidgen` to creates AK/SK</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#2aa198>&lt;&lt;EOF &gt;&gt; /tmp/minio
</span></span></span><span style=display:flex><span><span style=color:#2aa198>MINIO_VOLUMES=&#34;/data/minio/&#34;
</span></span></span><span style=display:flex><span><span style=color:#2aa198>MINIO_OPTS=&#34;--address :9199&#34;
</span></span></span><span style=display:flex><span><span style=color:#2aa198>MINIO_ACCESS_KEY=`uuidgen`
</span></span></span><span style=display:flex><span><span style=color:#2aa198>MINIO_SECRET_KEY=`uuidgen`
</span></span></span><span style=display:flex><span><span style=color:#2aa198>
</span></span></span><span style=display:flex><span><span style=color:#2aa198>EOF</span>
</span></span></code></pre></div><h2 id=启动服务>启动服务</h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl <span style=color:#b58900>enable</span> minio.service
</span></span><span style=display:flex><span>systemctl start minio.service
</span></span></code></pre></div><p><a href=https://docs.min.io/docs/minio-client-complete-guide.html>客户端 mc</a>
使用说明参考官方文档好了，和 s3 命令行也没太多区别，
甚至可以用来做 gcs/s3 代理用</p>&mldr;</div><a class=readmore href=/posts/minio-storage-service/>Read more ⟶</a></section><ul class=pagination><span class="page-item page-prev"></span><span class="page-item page-next"><a href=/page/2/ class=page-link aria-label=Next><span aria-hidden=true>Next →</span></a></span></ul></main><footer><div style=display:flex><a class=soc href=/index.xml rel=me title=RSS><i data-feather=rss></i></a>
<a class=border></a><a class=soc href=/daydayup/ rel=me title=Status><i data-feather=activity></i></a>
<a class=border></a><a class=soc href=https://yankuiyi.com/ rel=me title=microfeed><i data-feather=radio></i></a>
<a class=border></a><a class=soc href=https://fouland.com/ rel=me title=Logseq><i data-feather=inbox></i></a>
<a class=border></a><a class=soc href=https://at.yadanhe.com/ rel=me title=Mastodon><i data-feather=at-sign></i></a>
<a class=border></a></div><div class=footer-info>2024 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>